<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>jqGrid Column Swap</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-ui-dist/jquery-ui.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/free-jqgrid/dist/css/ui.jqgrid.min.css">
</head>
<body>
  <button onclick="swapColumns()">Swap Columns</button>
  <table id="a"></table>

  <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery-ui-dist/jquery-ui.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/free-jqgrid/dist/jquery.jqgrid.min.js"></script>
  <script>
    $(document).ready(function () {
      const grid = $("#a");

      grid.jqGrid({
        datatype: "local",
        colNames: ["ID", "Name", "Age", "Email"],
        colModel: [
          { name: "id", index: "id", width: 50 },
          { name: "name", index: "name", width: 150 },
          { name: "age", index: "age", width: 50 },
          { name: "email", index: "email", width: 200 }
        ],
        data: [
          { id: 1, name: "Alice", age: 25, email: "alice@example.com" },
          { id: 2, name: "Bob", age: 30, email: "bob@example.com" }
        ],
        rowNum: 1000,
        pager: null,
        caption: "",
        height: "auto"
      });
    });

    function swapColumns() {
      const grid = $("#a");

      // Danh sách thứ tự cột mong muốn
      const newOrder = ["name", "email", "id", "age"];
      const currentOrder = $("#a").jqGrid("getGridParam", "colModel").map(col => col.name);

      // Tạo mảng index mới
      const newIndexMap = newOrder.map(colName => currentOrder.indexOf(colName));

      // Hoán đổi cột
      grid.jqGrid("remapColumns", newIndexMap, true, false);
    }
  </script>
</body>
</html>
